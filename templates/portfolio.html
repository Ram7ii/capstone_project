<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Holdings â€“ NebulaTrade</title>

  <!-- MASTER THEME -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/app.css') }}">
</head>
<body>

<nav>
  <div class="logo">ðŸŒŒ NebulaTrade</div>
  <div>
    <a href="/dashboard">Trading Console</a>
    <a href="/watchlist">Watchlist</a>
    <a href="/logout">Logout</a>
  </div>
</nav>

<div class="container">

  <h2>Portfolio Overview</h2>
  <p style="color:var(--muted)">
    Virtual capital remaining: <b>${{ balance }}</b>
  </p>

  <!-- SUMMARY STATS -->
  <div class="stats">

    <div class="stat-card">
      <span>Total Positions</span>
      <h3>{{ portfolio|length }}</h3>
    </div>

    <div class="stat-card">
      <span>Net Performance</span>
      <h3 class="{% if total_pnl >= 0 %}profit{% else %}loss{% endif %}">
        {{ total_pnl }}
      </h3>
    </div>

  </div>

  <!-- HOLDINGS TABLE -->
  <div class="panel">

    {% if portfolio %}
    <table>
      <tr>
        <th>Asset</th>
        <th>Quantity</th>
        <th>Entry Price</th>
        <th>Market Price</th>
        <th>Profit / Loss</th>
      </tr>

      {% for p in portfolio %}
      <tr>
        <td>{{ p.company }}</td>
        <td>{{ p.quantity }}</td>
        <td>${{ p.buy_price }}</td>
        <td>${{ p.current_price }}</td>
        <td class="{% if p.pnl >= 0 %}profit{% else %}loss{% endif %}">
          {{ p.pnl }}
        </td>
      </tr>
      {% endfor %}
    </table>
    {% else %}
      <p>No open positions yet.</p>
    {% endif %}

  </div>

</div>

</body>
</html>
